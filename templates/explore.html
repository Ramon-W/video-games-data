{% extends "layout.html" %}
{% set page = "explore" %}
{% block title %} Explore {% endblock %}
{% block content %}
<div class="container" style="padding:50px 250px;">
  <form role="form">
    <div class="form-group">
      <input type="input" class="form-control input-lg" id="txt-search" placeholder="Type your search character">
    </div>
	</form>
  <div id="filter-records"></div>
</div>
{% endblock %}
{% block footer %}
<script type="text/javascript">
	$(document).ready(function(){
		var data = (function() {
			var data = null;
			$.ajax({
				'async': false,
				'global': false,
				'url': "/video_games.json",
				'dataType': "json",
				'success': function(data) {
					json = data;
				}
			});
			return json;
		})();
		$('#txt-search').keyup(function(){
			var searchField = $(this).val();
			if(searchField === '')  {
				$('#filter-records').html('');
				return;
			}
			var regex = new RegExp(searchField, "i");
			var output = '<div class="row">';
			var count = 1;
			$.each(data, function(key, val){
				if ((val.employee_salary.search(regex) != -1) || (val.employee_name.search(regex) != -1)) {
					output += '<div class="col-md-6 well">';
					output += '<div class="col-md-3"><img class="img-responsive" src="'+val.profile_image+'" alt="'+ val.employee_name +'" /></div>';
					output += '<div class="col-md-7">';
				        output += '<h5>' + val.employee_name + '</h5>';
				  	output += '<p>' + val.employee_salary + '</p>'
				  	output += '</div>';
				  	output += '</div>';
				  	if(count%2 == 0){
						output += '</div><div class="row">'
					}
					count++;
				}
			});
			output += '</div>';
			$('#filter-records').html(output);
		});
	});
</script>
{% endblock %}
